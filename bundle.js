"use strict";var e=require("events"),t=require("https"),r=require("http"),s=require("net"),n=require("tls"),o=require("crypto"),i=require("stream"),a=require("url"),c=require("zlib"),u=require("fs"),l=require("path"),h=require("os"),d=require("assert"),f=require("tty"),p=require("util");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var _=m(e),g=m(t),y=m(r),v=m(s),b=m(n),w=m(o),E=m(i),C=m(a),S=m(c),x=m(u),k=m(l),O=m(h),R=m(d),T=m(f),N=m(p);function L(e,t){return e(t={exports:{}},t.exports),t.exports}var A={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}},F="function"==typeof __webpack_require__?__non_webpack_require__:function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")},P=process.config&&process.config.variables||{},B=!!process.env.PREBUILDS_ONLY,U=process.versions.modules,j=!(!process.versions||!process.versions.electron)||!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",I=O.default.arch(),D=O.default.platform(),M=process.env.LIBC||(function(e){return"linux"===e&&x.default.existsSync("/etc/alpine-release")}(D)?"musl":"glibc"),q=process.env.ARM_VERSION||("arm64"===I?"8":P.arm_version)||"",W=(process.versions.uv||"").split(".")[0],$=V;function V(e){return F(V.path(e))}function G(e){try{return x.default.readdirSync(e)}catch(e){return[]}}function z(e,t){var r=G(e).filter(t);return r[0]&&k.default.join(e,r[0])}function H(e){return/\.node$/.test(e)}function Y(e){var t=e.split("-");if(2===t.length){var r=t[0],s=t[1].split("+");if(r&&s.length&&s.every(Boolean))return{name:e,platform:r,architectures:s}}}function J(e,t){return function(r){return null!=r&&(r.platform===e&&r.architectures.includes(t))}}function X(e,t){return e.architectures.length-t.architectures.length}function K(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var s=0;s<t.length;s++){var n=t[s];if("node"===n||"electron"===n||"node-webkit"===n)r.runtime=n;else if("napi"===n)r.napi=!0;else if("abi"===n.slice(0,3))r.abi=n.slice(3);else if("uv"===n.slice(0,2))r.uv=n.slice(2);else if("armv"===n.slice(0,4))r.armv=n.slice(4);else{if("glibc"!==n&&"musl"!==n)continue;r.libc=n}r.specificity++}return r}}function Z(e,t){return function(r){return null!=r&&(!(r.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(r))&&(!(r.abi!==t&&!r.napi)&&((!r.uv||r.uv===W)&&((!r.armv||r.armv===q)&&(!r.libc||r.libc===M)))))}}function Q(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}V.path=function(e){e=k.default.resolve(e||".");try{var t=F(k.default.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!B){var r=z(k.default.join(e,"build/Release"),H);if(r)return r;var s=z(k.default.join(e,"build/Debug"),H);if(s)return s}var n=a(e);if(n)return n;var o=a(k.default.dirname(process.execPath));if(o)return o;var i=["platform="+D,"arch="+I,"runtime="+j,"abi="+U,"uv="+W,q?"armv="+q:"","libc="+M,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","function"==typeof __webpack_require__?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+i+"\n    loaded from: "+e+"\n");function a(e){var t=G(k.default.join(e,"prebuilds")).map(Y).filter(J(D,I)).sort(X)[0];if(t){var r=k.default.join(e,"prebuilds",t.name),s=G(r).map(K).filter(Z(j,U)).sort(Q(j))[0];return s?k.default.join(r,s.file):void 0}}},V.parseTags=K,V.matchTags=Z,V.compareTags=Q,V.parseTuple=Y,V.matchTuple=J,V.compareTuples=X;var ee={mask:(e,t,r,s,n)=>{for(var o=0;o<n;o++)r[s+o]=e[o]^t[3&o]},unmask:(e,t)=>{const r=e.length;for(var s=0;s<r;s++)e[s]^=t[3&s]}},te=L((function(e){try{e.exports=$(__dirname)}catch(t){e.exports=ee}})),re=L((function(e){const{EMPTY_BUFFER:t}=A;function r(e,r){if(0===e.length)return t;if(1===e.length)return e[0];const s=Buffer.allocUnsafe(r);let n=0;for(let t=0;t<e.length;t++){const r=e[t];s.set(r,n),n+=r.length}return n<r?s.slice(0,n):s}function s(e,t,r,s,n){for(let o=0;o<n;o++)r[s+o]=e[o]^t[3&o]}function n(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function o(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function i(e){if(i.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),i.readOnly=!1),t}try{const t=te;e.exports={concat:r,mask(e,r,n,o,i){i<48?s(e,r,n,o,i):t.mask(e,r,n,o,i)},toArrayBuffer:o,toBuffer:i,unmask(e,r){e.length<32?n(e,r):t.unmask(e,r)}}}catch(t){e.exports={concat:r,mask:s,toArrayBuffer:o,toBuffer:i,unmask:n}}}));re.concat,re.mask,re.toArrayBuffer,re.toBuffer,re.unmask;const se=Symbol("kDone"),ne=Symbol("kRun");var oe=class{constructor(e){this[se]=()=>{this.pending--,this[ne]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[ne]()}[ne](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[se])}}};const{kStatusCode:ie}=A,ae=Buffer.from([0,0,255,255]),ce=Symbol("permessage-deflate"),ue=Symbol("total-length"),le=Symbol("callback"),he=Symbol("buffers"),de=Symbol("error");let fe;var pe=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!fe){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;fe=new oe(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[le];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){fe.add((s=>{this._decompress(e,t,((e,t)=>{s(),r(e,t)}))}))}compress(e,t,r){fe.add((s=>{this._compress(e,t,((e,t)=>{s(),r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?S.default.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=S.default.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[ce]=this,this._inflate[ue]=0,this._inflate[he]=[],this._inflate.on("error",ge),this._inflate.on("data",_e)}this._inflate[le]=r,this._inflate.write(e),t&&this._inflate.write(ae),this._inflate.flush((()=>{const e=this._inflate[de];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=re.concat(this._inflate[he],this._inflate[ue]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ue]=0,this._inflate[he]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?S.default.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=S.default.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[ue]=0,this._deflate[he]=[],this._deflate.on("data",me)}this._deflate[le]=r,this._deflate.write(e),this._deflate.flush(S.default.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=re.concat(this._deflate[he],this._deflate[ue]);t&&(e=e.slice(0,e.length-4)),this._deflate[le]=null,this._deflate[ue]=0,this._deflate[he]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}};function me(e){this[he].push(e),this[ue]+=e.length}function _e(e){this[ue]+=e.length,this[ce]._maxPayload<1||this[ue]<=this[ce]._maxPayload?this[he].push(e):(this[de]=new RangeError("Max payload size exceeded"),this[de].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[de][ie]=1009,this.removeListener("data",_e),this.reset())}function ge(e){this[ce]._inflate=null,e[ie]=1007,this[le](e)}var ye=function(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0},ve=L((function(e){try{e.exports=$(__dirname)}catch(t){e.exports=ye}})),be=L((function(e){const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function s(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{const n=ve;e.exports={isValidStatusCode:r,isValidUTF8:e=>e.length<150?s(e):n(e),tokenChars:t}}catch(n){e.exports={isValidStatusCode:r,isValidUTF8:s,tokenChars:t}}}));be.isValidStatusCode,be.isValidUTF8,be.tokenChars;const{Writable:we}=E.default,{BINARY_TYPES:Ee,EMPTY_BUFFER:Ce,kStatusCode:Se,kWebSocket:xe}=A,{concat:ke,toArrayBuffer:Oe,unmask:Re}=re,{isValidStatusCode:Te,isValidUTF8:Ne}=be;var Le=class extends we{constructor(e={}){super(),this._binaryType=e.binaryType||Ee[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[xe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,Ae(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[pe.extensionName])return this._loop=!1,Ae(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,Ae(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Ae(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,Ae(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,Ae(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,Ae(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,Ae(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,Ae(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,Ae(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Ae(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,Ae(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Ae(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=Ce;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&Re(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[pe.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(Ae(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const s=this.dataMessage();if(s)return t(s);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?ke(t,e):"arraybuffer"===this._binaryType?Oe(ke(t,e)):t,this.emit("message",r,!0)}else{const r=ke(t,e);if(!this._skipUTF8Validation&&!Ne(r))return this._loop=!1,Ae(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,Ce),this.end();else{if(1===e.length)return Ae(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!Te(t))return Ae(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!this._skipUTF8Validation&&!Ne(r))return Ae(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}};function Ae(e,t,r,s,n){const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,Ae),o.code=n,o[Se]=s,o}const{randomFillSync:Fe}=w.default,{EMPTY_BUFFER:Pe}=A,{isValidStatusCode:Be}=be,{mask:Ue,toBuffer:je}=re,Ie=Buffer.alloc(4);class De{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let s=t.mask?6:2,n=e.length;e.length>=65536?(s+=8,n=127):e.length>125&&(s+=2,n=126);const o=Buffer.allocUnsafe(r?e.length+s:s);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=n,126===n?o.writeUInt16BE(e.length,2):127===n&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(Fe(Ie,0,4),o[1]|=128,o[s-4]=Ie[0],o[s-3]=Ie[1],o[s-2]=Ie[2],o[s-1]=Ie[3],r?(Ue(e,Ie,o,s,e.length),[o]):(Ue(e,Ie,e,0,e.length),[o,e])):[o,e]}close(e,t,r,s){let n;if(void 0===e)n=Pe;else{if("number"!=typeof e||!Be(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+r),n.writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0)}this._deflating?this.enqueue([this.doClose,n,r,s]):this.doClose(n,r,s)}doClose(e,t,r){this.sendFrame(De.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const s=je(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,s,t,je.readOnly,r]):this.doPing(s,t,je.readOnly,r)}doPing(e,t,r,s){this.sendFrame(De.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),s)}pong(e,t,r){const s=je(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,s,t,je.readOnly,r]):this.doPong(s,t,je.readOnly,r)}doPong(e,t,r,s){this.sendFrame(De.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),s)}send(e,t,r){const s=je(e),n=this._extensions[pe.extensionName];let o=t.binary?2:1,i=t.compress;if(this._firstFragment?(this._firstFragment=!1,i&&n&&(i=s.length>=n._threshold),this._compress=i):(i=!1,o=0),t.fin&&(this._firstFragment=!0),n){const e={fin:t.fin,rsv1:i,opcode:o,mask:t.mask,readOnly:je.readOnly};this._deflating?this.enqueue([this.dispatch,s,this._compress,e,r]):this.dispatch(s,this._compress,e,r)}else this.sendFrame(De.frame(s,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:je.readOnly}),r)}dispatch(e,t,r,s){if(!t)return void this.sendFrame(De.frame(e,r),s);const n=this._extensions[pe.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,n.compress(e,r.fin,((t,n)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(De.frame(n,r),s),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}var Me=De;const{kForOnEventAttribute:qe,kListener:We}=A,$e=Symbol("kCode"),Ve=Symbol("kData"),Ge=Symbol("kError"),ze=Symbol("kMessage"),He=Symbol("kReason"),Ye=Symbol("kTarget"),Je=Symbol("kType"),Xe=Symbol("kWasClean");class Ke{constructor(e){this[Ye]=null,this[Je]=e}get target(){return this[Ye]}get type(){return this[Je]}}Object.defineProperty(Ke.prototype,"target",{enumerable:!0}),Object.defineProperty(Ke.prototype,"type",{enumerable:!0});class Ze extends Ke{constructor(e,t={}){super(e),this[$e]=void 0===t.code?0:t.code,this[He]=void 0===t.reason?"":t.reason,this[Xe]=void 0!==t.wasClean&&t.wasClean}get code(){return this[$e]}get reason(){return this[He]}get wasClean(){return this[Xe]}}Object.defineProperty(Ze.prototype,"code",{enumerable:!0}),Object.defineProperty(Ze.prototype,"reason",{enumerable:!0}),Object.defineProperty(Ze.prototype,"wasClean",{enumerable:!0});class Qe extends Ke{constructor(e,t={}){super(e),this[Ge]=void 0===t.error?null:t.error,this[ze]=void 0===t.message?"":t.message}get error(){return this[Ge]}get message(){return this[ze]}}Object.defineProperty(Qe.prototype,"error",{enumerable:!0}),Object.defineProperty(Qe.prototype,"message",{enumerable:!0});class et extends Ke{constructor(e,t={}){super(e),this[Ve]=void 0===t.data?null:t.data}get data(){return this[Ve]}}Object.defineProperty(et.prototype,"data",{enumerable:!0});const tt={addEventListener(e,t,r={}){let s;if("message"===e)s=function(e,r){const s=new et("message",{data:r?e:e.toString()});s[Ye]=this,t.call(this,s)};else if("close"===e)s=function(e,r){const s=new Ze("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[Ye]=this,t.call(this,s)};else if("error"===e)s=function(e){const r=new Qe("error",{error:e,message:e.message});r[Ye]=this,t.call(this,r)};else{if("open"!==e)return;s=function(){const e=new Ke("open");e[Ye]=this,t.call(this,e)}}s[qe]=!!r[qe],s[We]=t,r.once?this.once(e,s):this.on(e,s)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[We]===t&&!r[qe]){this.removeListener(e,r);break}}};var rt={CloseEvent:Ze,ErrorEvent:Qe,Event:Ke,EventTarget:tt,MessageEvent:et};const{tokenChars:st}=be;function nt(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}var ot={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,s,n=Object.create(null),o=!1,i=!1,a=!1,c=-1,u=-1,l=-1,h=0;for(;h<e.length;h++)if(u=e.charCodeAt(h),void 0===r)if(-1===l&&1===st[u])-1===c&&(c=h);else if(0===h||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${h}`);-1===l&&(l=h);const s=e.slice(c,l);44===u?(nt(t,s,n),n=Object.create(null)):r=s,c=l=-1}}else-1===l&&-1!==c&&(l=h);else if(void 0===s)if(-1===l&&1===st[u])-1===c&&(c=h);else if(32===u||9===u)-1===l&&-1!==c&&(l=h);else if(59===u||44===u){if(-1===c)throw new SyntaxError(`Unexpected character at index ${h}`);-1===l&&(l=h),nt(n,e.slice(c,l),!0),44===u&&(nt(t,r,n),n=Object.create(null),r=void 0),c=l=-1}else{if(61!==u||-1===c||-1!==l)throw new SyntaxError(`Unexpected character at index ${h}`);s=e.slice(c,h),c=l=-1}else if(i){if(1!==st[u])throw new SyntaxError(`Unexpected character at index ${h}`);-1===c?c=h:o||(o=!0),i=!1}else if(a)if(1===st[u])-1===c&&(c=h);else if(34===u&&-1!==c)a=!1,l=h;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${h}`);i=!0}else if(34===u&&61===e.charCodeAt(h-1))a=!0;else if(-1===l&&1===st[u])-1===c&&(c=h);else if(-1===c||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${h}`);-1===l&&(l=h);let i=e.slice(c,l);o&&(i=i.replace(/\\/g,""),o=!1),nt(n,s,i),44===u&&(nt(t,r,n),n=Object.create(null),r=void 0),s=void 0,c=l=-1}}else-1===l&&(l=h);if(-1===c||a||32===u||9===u)throw new SyntaxError("Unexpected end of input");-1===l&&(l=h);const d=e.slice(c,l);return void 0===r?nt(t,d,n):(void 0===s?nt(n,d,!0):nt(n,s,o?d.replace(/\\/g,""):d),nt(t,r,n)),t}};const{randomBytes:it,createHash:at}=w.default,{URL:ct}=C.default,{BINARY_TYPES:ut,EMPTY_BUFFER:lt,GUID:ht,kForOnEventAttribute:dt,kListener:ft,kStatusCode:pt,kWebSocket:mt,NOOP:_t}=A,{EventTarget:{addEventListener:gt,removeEventListener:yt}}=rt,{format:vt,parse:bt}=ot,{toBuffer:wt}=re,Et=["CONNECTING","OPEN","CLOSING","CLOSED"],Ct=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,St=[8,13];class xt extends _.default{constructor(e,t,r){super(),this._binaryType=ut[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=lt,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=xt.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),Ot(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){ut.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new Le({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new Me(e,this._extensions),this._receiver=s,this._socket=e,s[mt]=this,e[mt]=this,s.on("conclude",At),s.on("drain",Ft),s.on("error",Pt),s.on("message",Ut),s.on("ping",jt),s.on("pong",It),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Mt),e.on("data",qt),e.on("end",Wt),e.on("error",$t),this._readyState=xt.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=xt.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[pe.extensionName]&&this._extensions[pe.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=xt.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==xt.CLOSED){if(this.readyState===xt.CONNECTING){const e="WebSocket was closed before the connection was established";return Nt(this,this._req,e)}this.readyState!==xt.CLOSING?(this._readyState=xt.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===xt.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===xt.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||lt,t,r)):Lt(this,e,r)}pong(e,t,r){if(this.readyState===xt.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===xt.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||lt,t,r)):Lt(this,e,r)}send(e,t,r){if(this.readyState===xt.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==xt.OPEN)return void Lt(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[pe.extensionName]||(s.compress=!1),this._sender.send(e||lt,s,r)}terminate(){if(this.readyState!==xt.CLOSED){if(this.readyState===xt.CONNECTING){const e="WebSocket was closed before the connection was established";return Nt(this,this._req,e)}this._socket&&(this._readyState=xt.CLOSING,this._socket.destroy())}}}Object.defineProperty(xt,"CONNECTING",{enumerable:!0,value:Et.indexOf("CONNECTING")}),Object.defineProperty(xt.prototype,"CONNECTING",{enumerable:!0,value:Et.indexOf("CONNECTING")}),Object.defineProperty(xt,"OPEN",{enumerable:!0,value:Et.indexOf("OPEN")}),Object.defineProperty(xt.prototype,"OPEN",{enumerable:!0,value:Et.indexOf("OPEN")}),Object.defineProperty(xt,"CLOSING",{enumerable:!0,value:Et.indexOf("CLOSING")}),Object.defineProperty(xt.prototype,"CLOSING",{enumerable:!0,value:Et.indexOf("CLOSING")}),Object.defineProperty(xt,"CLOSED",{enumerable:!0,value:Et.indexOf("CLOSED")}),Object.defineProperty(xt.prototype,"CLOSED",{enumerable:!0,value:Et.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(xt.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(xt.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[dt])return t[ft];return null},set(t){for(const t of this.listeners(e))if(t[dt]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[dt]:!0})}})})),xt.prototype.addEventListener=gt,xt.prototype.removeEventListener=yt;var kt=xt;function Ot(e,t,r,s){const n={protocolVersion:St[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!St.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${St.join(", ")})`);let o;if(t instanceof ct)o=t,e._url=t.href;else{try{o=new ct(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const i="wss:"===o.protocol,a="ws+unix:"===o.protocol;if("ws:"!==o.protocol&&!i&&!a)throw new SyntaxError('The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"');if(a&&!o.pathname)throw new SyntaxError("The URL's pathname is empty");if(o.hash)throw new SyntaxError("The URL contains a fragment identifier");const c=i?443:80,u=it(16).toString("base64"),l=i?g.default.get:y.default.get,h=new Set;let d;if(n.createConnection=i?Tt:Rt,n.defaultPort=n.defaultPort||c,n.port=o.port||c,n.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,n.headers={"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket",...n.headers},n.path=o.pathname+o.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(d=new pe(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=vt({[pe.extensionName]:d.offer()})),r.length){for(const e of r){if("string"!=typeof e||!Ct.test(e)||h.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(e)}n.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(o.username||o.password)&&(n.auth=`${o.username}:${o.password}`),a){const e=n.path.split(":");n.socketPath=e[0],n.path=e[1]}let f=e._req=l(n);n.timeout&&f.on("timeout",(()=>{Nt(e,f,"Opening handshake has timed out")})),f.on("error",(t=>{null===f||f.aborted||(f=e._req=null,e._readyState=xt.CLOSING,e.emit("error",t),e.emitClose())})),f.on("response",(o=>{const i=o.headers.location,a=o.statusCode;if(i&&n.followRedirects&&a>=300&&a<400){if(++e._redirects>n.maxRedirects)return void Nt(e,f,"Maximum redirects exceeded");f.abort();const o=new ct(i,t);Ot(e,o,r,s)}else e.emit("unexpected-response",f,o)||Nt(e,f,`Unexpected server response: ${o.statusCode}`)})),f.on("upgrade",((t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==xt.CONNECTING)return;f=e._req=null;const o=at("sha1").update(u+ht).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void Nt(e,r,"Invalid Sec-WebSocket-Accept header");const i=t.headers["sec-websocket-protocol"];let a;if(void 0!==i?h.size?h.has(i)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":h.size&&(a="Server sent no subprotocol"),a)return void Nt(e,r,a);i&&(e._protocol=i);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!d){return void Nt(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=bt(c)}catch(t){return void Nt(e,r,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==pe.extensionName){return void Nt(e,r,"Server indicated an extension that was not requested")}try{d.accept(t[pe.extensionName])}catch(t){return void Nt(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[pe.extensionName]=d}e.setSocket(r,s,{maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}))}function Rt(e){return e.path=e.socketPath,v.default.connect(e)}function Tt(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=v.default.isIP(e.host)?"":e.host),b.default.connect(e)}function Nt(e,t,r){e._readyState=xt.CLOSING;const s=new Error(r);Error.captureStackTrace(s,Nt),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function Lt(e,t,r){if(t){const r=wt(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${e.readyState} (${Et[e.readyState]})`))}}function At(e,t){const r=this[mt];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[mt]&&(r._socket.removeListener("data",qt),process.nextTick(Dt,r._socket),1005===e?r.close():r.close(e,t))}function Ft(){this[mt]._socket.resume()}function Pt(e){const t=this[mt];void 0!==t._socket[mt]&&(t._socket.removeListener("data",qt),process.nextTick(Dt,t._socket),t.close(e[pt])),t.emit("error",e)}function Bt(){this[mt].emitClose()}function Ut(e,t){this[mt].emit("message",e,t)}function jt(e){const t=this[mt];t.pong(e,!t._isServer,_t),t.emit("ping",e)}function It(e){this[mt].emit("pong",e)}function Dt(e){e.resume()}function Mt(){const e=this[mt];let t;this.removeListener("close",Mt),this.removeListener("data",qt),this.removeListener("end",Wt),e._readyState=xt.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[mt]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",Bt),e._receiver.on("finish",Bt))}function qt(e){this[mt]._receiver.write(e)||this.pause()}function Wt(){const e=this[mt];e._readyState=xt.CLOSING,e._receiver.end(),this.end()}function $t(){const e=this[mt];this.removeListener("error",$t),this.on("error",_t),e&&(e._readyState=xt.CLOSING,this.destroy())}const{Duplex:Vt}=E.default;function Gt(e){e.emit("close")}function zt(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Ht(e){this.removeListener("error",Ht),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}var Yt=function(e,t){let r=!0,s=!0;function n(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",n)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",n));const o=new Vt({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,s){const n=!s&&o._readableState.objectMode?t.toString():t;o.push(n)||(r=!1,e._socket.pause())})),e.once("error",(function(e){o.destroyed||(s=!1,o.destroy(e))})),e.once("close",(function(){o.destroyed||o.push(null)})),o._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(Gt,o);let n=!1;e.once("error",(function(e){n=!0,r(e)})),e.once("close",(function(){n||r(t),process.nextTick(Gt,o)})),s&&e.terminate()},o._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){o._final(t)}))},o._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},o._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",(function(){o._write(t,r,s)}))},o.on("end",zt),o.on("error",Ht),o};const{tokenChars:Jt}=be;var Xt={parse:function(e){const t=new Set;let r=-1,s=-1,n=0;for(;n<e.length;n++){const o=e.charCodeAt(n);if(-1===s&&1===Jt[o])-1===r&&(r=n);else if(0===n||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${n}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${n}`);-1===s&&(s=n);const o=e.slice(r,s);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);t.add(o),r=s=-1}}else-1===s&&-1!==r&&(s=n)}if(-1===r||-1!==s)throw new SyntaxError("Unexpected end of input");const o=e.slice(r,n);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}};const{createHash:Kt}=w.default,{GUID:Zt,kWebSocket:Qt}=A,er=/^[+/0-9A-Za-z]{22}==$/;class tr extends _.default{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=y.default.createServer(((e,t)=>{const r=y.default.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(sr,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(sr,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{sr(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",nr);const n=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!n||!er.test(n)||8!==o&&13!==o||!this.shouldHandle(e))return or(t,400);const i=e.headers["sec-websocket-protocol"];let a=new Set;if(void 0!==i)try{a=Xt.parse(i)}catch(e){return or(t,400)}const c=e.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&void 0!==c){const e=new pe(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=ot.parse(c);t[pe.extensionName]&&(e.accept(t[pe.extensionName]),u[pe.extensionName]=e)}catch(e){return or(t,400)}}if(this.options.verifyClient){const i={origin:e.headers[""+(8===o?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,((o,i,c,l)=>{if(!o)return or(t,i||401,c,l);this.completeUpgrade(u,n,a,e,t,r,s)}));if(!this.options.verifyClient(i))return or(t,401)}this.completeUpgrade(u,n,a,e,t,r,s)}completeUpgrade(e,t,r,s,n,o,i){if(!n.readable||!n.writable)return n.destroy();if(n[Qt])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return or(n,503);const a=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Kt("sha1").update(t+Zt).digest("base64")}`],c=new kt(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(a.push(`Sec-WebSocket-Protocol: ${e}`),c._protocol=e)}if(e[pe.extensionName]){const t=e[pe.extensionName].params,r=ot.format({[pe.extensionName]:[t]});a.push(`Sec-WebSocket-Extensions: ${r}`),c._extensions=e}this.emit("headers",a,s),n.write(a.concat("\r\n").join("\r\n")),n.removeListener("error",nr),c.setSocket(n,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(c),c.on("close",(()=>{this.clients.delete(c),this._shouldEmitClose&&!this.clients.size&&process.nextTick(sr,this)}))),i(c,s)}}var rr=tr;function sr(e){e._state=2,e.emit("close")}function nr(){this.destroy()}function or(e,t,r,s){e.writable&&(r=r||y.default.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.write(`HTTP/1.1 ${t} ${y.default.STATUS_CODES[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",nr),e.destroy()}kt.createWebSocketStream=Yt,kt.Server=rr,kt.Receiver=Le,kt.Sender=Me,kt.WebSocket=kt,kt.WebSocketServer=kt.Server;var ir=kt,ar=function(e,t){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(t,r)}},cr=Object.prototype.toString;function ur(e){return"[object Array]"===cr.call(e)}function lr(e){return void 0===e}function hr(e){return null!==e&&"object"==typeof e}function dr(e){if("[object Object]"!==cr.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function fr(e){return"[object Function]"===cr.call(e)}function pr(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),ur(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}var mr={isArray:ur,isArrayBuffer:function(e){return"[object ArrayBuffer]"===cr.call(e)},isBuffer:function(e){return null!==e&&!lr(e)&&null!==e.constructor&&!lr(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:hr,isPlainObject:dr,isUndefined:lr,isDate:function(e){return"[object Date]"===cr.call(e)},isFile:function(e){return"[object File]"===cr.call(e)},isBlob:function(e){return"[object Blob]"===cr.call(e)},isFunction:fr,isStream:function(e){return hr(e)&&fr(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:pr,merge:function e(){var t={};function r(r,s){dr(t[s])&&dr(r)?t[s]=e(t[s],r):dr(r)?t[s]=e({},r):ur(r)?t[s]=r.slice():t[s]=r}for(var s=0,n=arguments.length;s<n;s++)pr(arguments[s],r);return t},extend:function(e,t,r){return pr(t,(function(t,s){e[s]=r&&"function"==typeof t?ar(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function _r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var gr=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(mr.isURLSearchParams(t))s=t.toString();else{var n=[];mr.forEach(t,(function(e,t){null!=e&&(mr.isArray(e)?t+="[]":e=[e],mr.forEach(e,(function(e){mr.isDate(e)?e=e.toISOString():mr.isObject(e)&&(e=JSON.stringify(e)),n.push(_r(t)+"="+_r(e))})))})),s=n.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e};function yr(){this.handlers=[]}yr.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},yr.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},yr.prototype.forEach=function(e){mr.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var vr=yr,br=function(e,t){mr.forEach(e,(function(r,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[s])}))},wr=function(e,t,r,s,n){return e.config=t,r&&(e.code=r),e.request=s,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Er=function(e,t,r,s,n){var o=new Error(e);return wr(o,t,r,s,n)},Cr=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(Er("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},Sr=mr.isStandardBrowserEnv()?{write:function(e,t,r,s,n,o){var i=[];i.push(e+"="+encodeURIComponent(t)),mr.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),mr.isString(s)&&i.push("path="+s),mr.isString(n)&&i.push("domain="+n),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},xr=function(e,t){return e&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t},kr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Or=mr.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var s=e;return t&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=mr.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Rr=function(e){return new Promise((function(t,r){var s=e.data,n=e.headers,o=e.responseType;mr.isFormData(s)&&delete n["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.Authorization="Basic "+btoa(a+":"+c)}var u=xr(e.baseURL,e.url);function l(){if(i){var s,n,a,c,u,l="getAllResponseHeaders"in i?(s=i.getAllResponseHeaders(),u={},s?(mr.forEach(s.split("\n"),(function(e){if(c=e.indexOf(":"),n=mr.trim(e.substr(0,c)).toLowerCase(),a=mr.trim(e.substr(c+1)),n){if(u[n]&&kr.indexOf(n)>=0)return;u[n]="set-cookie"===n?(u[n]?u[n]:[]).concat([a]):u[n]?u[n]+", "+a:a}})),u):u):null,h={data:o&&"text"!==o&&"json"!==o?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:l,config:e,request:i};Cr(t,r,h),i=null}}if(i.open(e.method.toUpperCase(),gr(u,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,"onloadend"in i?i.onloadend=l:i.onreadystatechange=function(){i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&setTimeout(l)},i.onabort=function(){i&&(r(Er("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(Er("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(Er(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",i)),i=null},mr.isStandardBrowserEnv()){var h=(e.withCredentials||Or(u))&&e.xsrfCookieName?Sr.read(e.xsrfCookieName):void 0;h&&(n[e.xsrfHeaderName]=h)}"setRequestHeader"in i&&mr.forEach(n,(function(e,t){void 0===s&&"content-type"===t.toLowerCase()?delete n[t]:i.setRequestHeader(t,e)})),mr.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),o&&"json"!==o&&(i.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),s||(s=null),i.send(s)}))},Tr=1e3,Nr=60*Tr,Lr=60*Nr,Ar=24*Lr,Fr=7*Ar,Pr=365.25*Ar,Br=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Pr;case"weeks":case"week":case"w":return r*Fr;case"days":case"day":case"d":return r*Ar;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Lr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Nr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=Ar)return Ur(e,t,Ar,"day");if(t>=Lr)return Ur(e,t,Lr,"hour");if(t>=Nr)return Ur(e,t,Nr,"minute");if(t>=Tr)return Ur(e,t,Tr,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=Ar)return Math.round(e/Ar)+"d";if(t>=Lr)return Math.round(e/Lr)+"h";if(t>=Nr)return Math.round(e/Nr)+"m";if(t>=Tr)return Math.round(e/Tr)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ur(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}var jr=function(e){function t(e){let s,n,o,i=null;function a(...e){if(!a.enabled)return;const r=a,n=Number(new Date),o=n-(s||n);r.diff=o,r.prev=s,r.curr=n,s=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((s,n)=>{if("%%"===s)return"%";i++;const o=t.formatters[n];if("function"==typeof o){const t=e[i];s=o.call(r,t),e.splice(i,1),i--}return s})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Br,t.destroy=function(){},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t},Ir=L((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0)}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=jr(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}));Ir.formatArgs,Ir.save,Ir.load,Ir.useColors,Ir.storage,Ir.destroy,Ir.colors,Ir.log;var Dr=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return-1!==s&&(-1===n||s<n)};const Mr=process.env;let qr;function Wr(e){const t=function(e){if(!1===qr)return 0;if(Dr("color=16m")||Dr("color=full")||Dr("color=truecolor"))return 3;if(Dr("color=256"))return 2;if(e&&!e.isTTY&&!0!==qr)return 0;const t=qr?1:0;if("win32"===process.platform){const e=O.default.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in Mr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in Mr))||"codeship"===Mr.CI_NAME?1:t;if("TEAMCITY_VERSION"in Mr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Mr.TEAMCITY_VERSION)?1:0;if("truecolor"===Mr.COLORTERM)return 3;if("TERM_PROGRAM"in Mr){const e=parseInt((Mr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Mr.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Mr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Mr.TERM)||"COLORTERM"in Mr?1:(Mr.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}Dr("no-color")||Dr("no-colors")||Dr("color=false")?qr=!1:(Dr("color")||Dr("colors")||Dr("color=true")||Dr("color=always"))&&(qr=!0),"FORCE_COLOR"in Mr&&(qr=0===Mr.FORCE_COLOR.length||0!==parseInt(Mr.FORCE_COLOR,10));var $r={supportsColor:Wr,stdout:Wr(process.stdout),stderr:Wr(process.stderr)},Vr=L((function(e,t){t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(N.default.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),o=`  ${n};1m${s} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):T.default.isatty(process.stderr.fd)},t.destroy=N.default.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=$r;e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e}),{}),e.exports=jr(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,N.default.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,N.default.inspect(e,this.inspectOpts)}}));Vr.init,Vr.log,Vr.formatArgs,Vr.save,Vr.load,Vr.useColors,Vr.destroy,Vr.colors,Vr.inspectOpts;var Gr,zr=L((function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=Ir:e.exports=Vr})),Hr=function(){if(!Gr){try{Gr=zr("follow-redirects")}catch(e){}"function"!=typeof Gr&&(Gr=function(){})}Gr.apply(null,arguments)},Yr=C.default.URL,Jr=E.default.Writable,Xr=["abort","aborted","connect","error","socket","timeout"],Kr=Object.create(null);Xr.forEach((function(e){Kr[e]=function(t,r,s){this._redirectable.emit(e,t,r,s)}}));var Zr=as("ERR_FR_REDIRECTION_FAILURE",""),Qr=as("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),es=as("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),ts=as("ERR_STREAM_WRITE_AFTER_END","write after end");function rs(e,t){Jr.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function ss(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(s){var n=s+":",o=r[n]=e[s],i=t[s]=Object.create(o);Object.defineProperties(i,{request:{value:function(e,s,o){if("string"==typeof e){var i=e;try{e=os(new Yr(i))}catch(t){e=C.default.parse(i)}}else Yr&&e instanceof Yr?e=os(e):(o=s,s=e,e={protocol:n});return"function"==typeof s&&(o=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=r,R.default.equal(s.protocol,n,"protocol mismatch"),Hr("options",s),new rs(s,o)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var s=i.request(e,t,r);return s.end(),s},configurable:!0,enumerable:!0,writable:!0}})})),t}function ns(){}function os(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function is(e,t){var r;for(var s in t)e.test(s)&&(r=t[s],delete t[s]);return r}function as(e,t){function r(e){Error.captureStackTrace(this,this.constructor),this.message=e||t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function cs(e){for(var t=0;t<Xr.length;t++)e.removeListener(Xr[t],Kr[Xr[t]]);e.on("error",ns),e.abort()}rs.prototype=Object.create(Jr.prototype),rs.prototype.abort=function(){cs(this._currentRequest),this.emit("abort")},rs.prototype.write=function(e,t,r){if(this._ending)throw new ts;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new es),this.abort()):r&&r()},rs.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var s=this,n=this._currentRequest;this.write(e,t,(function(){s._ended=!0,n.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},rs.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},rs.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},rs.prototype.setTimeout=function(e,t){var r=this;function s(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function n(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),o()}),e),s(t)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",n)}return t&&this.on("timeout",t),this.socket?n(this.socket):this._currentRequest.once("socket",n),this.on("socket",s),this.once("response",o),this.once("error",o),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){rs.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(rs.prototype,e,{get:function(){return this._currentRequest[e]}})})),rs.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},rs.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);this._currentUrl=C.default.format(this._options),s._redirectable=this;for(var n=0;n<Xr.length;n++)s.on(Xr[n],Kr[Xr[n]]);if(this._isRedirect){var o=0,i=this,a=this._requestBodyBuffers;!function e(t){if(s===i._currentRequest)if(t)i.emit("error",t);else if(o<a.length){var r=a[o++];s.finished||s.write(r.data,r.encoding,e)}else i._ended&&s.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},rs.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&!1!==this._options.followRedirects&&t>=300&&t<400){if(cs(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Qr);((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],is(/^content-/i,this._options.headers));var s=is(/^host$/i,this._options.headers)||C.default.parse(this._currentUrl).hostname,n=C.default.resolve(this._currentUrl,r);Hr("redirecting to",n),this._isRedirect=!0;var o=C.default.parse(n);if(Object.assign(this._options,o),o.hostname!==s&&is(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var i={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,i)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){var a=new Zr("Redirected request failed: "+e.message);a.cause=e,this.emit("error",a)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};var us=ss({http:y.default,https:g.default}),ls=ss;us.wrap=ls;var hs,ds="axios@0.21.4",fs="sha1-xnuQ3AVo5cHPKwuFjEO6KOLtpXU=",ps={},ms={type:"range",registry:!0,raw:"axios@^0.21.4",name:"axios",escapedName:"axios",rawSpec:"^0.21.4",saveSpec:null,fetchSpec:"^0.21.4"},_s=["#USER","/"],gs="https://registry.nlark.com/axios/download/axios-0.21.4.tgz?cache=0&sync_timestamp=1630942656836&other_urls=https%3A%2F%2Fregistry.nlark.com%2Faxios%2Fdownload%2Faxios-0.21.4.tgz",ys="c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",vs="C:\\develop\\0.demo-pro\\ws-http\\client",bs={name:"Matt Zabriskie"},ws={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},Es={url:"https://github.com/axios/axios/issues"},Cs=[{path:"./dist/axios.min.js",threshold:"5kB"}],Ss={"follow-redirects":"^1.14.0"},xs="Promise based HTTP client for the browser and node.js",ks={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},Os=["xhr","http","ajax","promise","node"],Rs={type:"git",url:"git+https://github.com/axios/axios.git"},Ts={build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},Ns="dist/axios.min.js",Ls={_from:"axios@^0.21.4",_id:ds,_inBundle:false,_integrity:fs,_location:"/axios",_phantomChildren:ps,_requested:ms,_requiredBy:_s,_resolved:gs,_shasum:ys,_spec:"axios@^0.21.4",_where:vs,author:bs,browser:ws,bugs:Es,bundleDependencies:false,bundlesize:Cs,dependencies:Ss,deprecated:false,description:xs,devDependencies:ks,homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:Os,license:"MIT",main:"index.js",name:"axios",repository:Rs,scripts:Ts,typings:"./index.d.ts",unpkg:Ns,version:"0.21.4"},As=(hs=Object.freeze({__proto__:null,_from:"axios@^0.21.4",_id:ds,_inBundle:false,_integrity:fs,_location:"/axios",_phantomChildren:ps,_requested:ms,_requiredBy:_s,_resolved:gs,_shasum:ys,_spec:"axios@^0.21.4",_where:vs,author:bs,browser:ws,bugs:Es,bundleDependencies:false,bundlesize:Cs,dependencies:Ss,deprecated:false,description:xs,devDependencies:ks,homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:Os,license:"MIT",main:"index.js",name:"axios",repository:Rs,scripts:Ts,typings:"./index.d.ts",unpkg:Ns,version:"0.21.4",default:Ls}))&&hs.default||hs,Fs=us.http,Ps=us.https,Bs=/https:?/;function Us(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var s=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+s}e.beforeRedirect=function(e){e.headers.host=e.host,Us(e,t,e.href)}}var js=function(e){return new Promise((function(t,r){var s=function(e){t(e)},n=function(e){r(e)},o=e.data,i=e.headers;if("User-Agent"in i||"user-agent"in i?i["User-Agent"]||i["user-agent"]||(delete i["User-Agent"],delete i["user-agent"]):i["User-Agent"]="axios/"+As.version,o&&!mr.isStream(o)){if(Buffer.isBuffer(o));else if(mr.isArrayBuffer(o))o=Buffer.from(new Uint8Array(o));else{if(!mr.isString(o))return n(Er("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));o=Buffer.from(o,"utf-8")}i["Content-Length"]=o.length}var a=void 0;e.auth&&(a=(e.auth.username||"")+":"+(e.auth.password||""));var c=xr(e.baseURL,e.url),u=C.default.parse(c),l=u.protocol||"http:";if(!a&&u.auth){var h=u.auth.split(":");a=(h[0]||"")+":"+(h[1]||"")}a&&delete i.Authorization;var d=Bs.test(l),f=d?e.httpsAgent:e.httpAgent,p={path:gr(u.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:i,agent:f,agents:{http:e.httpAgent,https:e.httpsAgent},auth:a};e.socketPath?p.socketPath=e.socketPath:(p.hostname=u.hostname,p.port=u.port);var m,_=e.proxy;if(!_&&!1!==_){var v=l.slice(0,-1)+"_proxy",b=process.env[v]||process.env[v.toUpperCase()];if(b){var w=C.default.parse(b),E=process.env.no_proxy||process.env.NO_PROXY,x=!0;if(E){var k=E.split(",").map((function(e){return e.trim()}));x=!k.some((function(e){return!!e&&("*"===e||("."===e[0]&&u.hostname.substr(u.hostname.length-e.length)===e||u.hostname===e))}))}if(x&&(_={host:w.hostname,port:w.port,protocol:w.protocol},w.auth)){var O=w.auth.split(":");_.auth={username:O[0],password:O[1]}}}}_&&(p.headers.host=u.hostname+(u.port?":"+u.port:""),Us(p,_,l+"//"+u.hostname+(u.port?":"+u.port:"")+p.path));var R=d&&(!_||Bs.test(_.protocol));e.transport?m=e.transport:0===e.maxRedirects?m=R?g.default:y.default:(e.maxRedirects&&(p.maxRedirects=e.maxRedirects),m=R?Ps:Fs),e.maxBodyLength>-1&&(p.maxBodyLength=e.maxBodyLength);var T=m.request(p,(function(t){if(!T.aborted){var r=t,o=t.req||T;if(204!==t.statusCode&&"HEAD"!==o.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(S.default.createUnzip()),delete t.headers["content-encoding"]}var i={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:o};if("stream"===e.responseType)i.data=r,Cr(s,n,i);else{var a=[],c=0;r.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(r.destroy(),n(Er("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,o)))})),r.on("error",(function(t){T.aborted||n(wr(t,e,null,o))})),r.on("end",(function(){var t=Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=mr.stripBOM(t))),i.data=t,Cr(s,n,i)}))}}}));if(T.on("error",(function(t){T.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||n(wr(t,e,null,T))})),e.timeout){var N=parseInt(e.timeout,10);if(isNaN(N))return void n(Er("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",T));T.setTimeout(N,(function(){T.abort(),n(Er("timeout of "+N+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",T))}))}e.cancelToken&&e.cancelToken.promise.then((function(e){T.aborted||(T.abort(),n(e))})),mr.isStream(o)?o.on("error",(function(t){n(wr(t,e,null,T))})).pipe(T):T.end(o)}))},Is={"Content-Type":"application/x-www-form-urlencoded"};function Ds(e,t){!mr.isUndefined(e)&&mr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Ms,qs={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?Ms=Rr:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(Ms=js),Ms),transformRequest:[function(e,t){return br(t,"Accept"),br(t,"Content-Type"),mr.isFormData(e)||mr.isArrayBuffer(e)||mr.isBuffer(e)||mr.isStream(e)||mr.isFile(e)||mr.isBlob(e)?e:mr.isArrayBufferView(e)?e.buffer:mr.isURLSearchParams(e)?(Ds(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):mr.isObject(e)||t&&"application/json"===t["Content-Type"]?(Ds(t,"application/json"),function(e,t,r){if(mr.isString(e))try{return(t||JSON.parse)(e),mr.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,n=!r&&"json"===this.responseType;if(n||s&&mr.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw wr(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};qs.headers={common:{Accept:"application/json, text/plain, */*"}},mr.forEach(["delete","get","head"],(function(e){qs.headers[e]={}})),mr.forEach(["post","put","patch"],(function(e){qs.headers[e]=mr.merge(Is)}));var Ws=qs,$s=function(e,t,r){var s=this||Ws;return mr.forEach(r,(function(r){e=r.call(s,e,t)})),e},Vs=function(e){return!(!e||!e.__CANCEL__)};function Gs(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var zs=function(e){return Gs(e),e.headers=e.headers||{},e.data=$s.call(e,e.data,e.headers,e.transformRequest),e.headers=mr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),mr.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Ws.adapter)(e).then((function(t){return Gs(e),t.data=$s.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Vs(t)||(Gs(e),t&&t.response&&(t.response.data=$s.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Hs=function(e,t){t=t||{};var r={},s=["url","method","data"],n=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function a(e,t){return mr.isPlainObject(e)&&mr.isPlainObject(t)?mr.merge(e,t):mr.isPlainObject(t)?mr.merge({},t):mr.isArray(t)?t.slice():t}function c(s){mr.isUndefined(t[s])?mr.isUndefined(e[s])||(r[s]=a(void 0,e[s])):r[s]=a(e[s],t[s])}mr.forEach(s,(function(e){mr.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),mr.forEach(n,c),mr.forEach(o,(function(s){mr.isUndefined(t[s])?mr.isUndefined(e[s])||(r[s]=a(void 0,e[s])):r[s]=a(void 0,t[s])})),mr.forEach(i,(function(s){s in t?r[s]=a(e[s],t[s]):s in e&&(r[s]=a(void 0,e[s]))}));var u=s.concat(n).concat(o).concat(i),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return mr.forEach(l,c),r},Ys={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ys[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var Js={},Xs=As.version.split(".");function Ks(e,t){for(var r=t?t.split("."):Xs,s=e.split("."),n=0;n<3;n++){if(r[n]>s[n])return!0;if(r[n]<s[n])return!1}return!1}Ys.transitional=function(e,t,r){var s=t&&Ks(t);return function(n,o,i){if(!1===e)throw new Error(function(e,t){return"[Axios v"+As.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(o," has been removed in "+t));return s&&!Js[o]&&(Js[o]=!0),!e||e(n,o,i)}};var Zs={isOlderVersion:Ks,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var s=Object.keys(e),n=s.length;n-- >0;){var o=s[n],i=t[o];if(i){var a=e[o],c=void 0===a||i(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:Ys},Qs=Zs.validators;function en(e){this.defaults=e,this.interceptors={request:new vr,response:new vr}}en.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Hs(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&Zs.assertOptions(t,{silentJSONParsing:Qs.transitional(Qs.boolean,"1.0.0"),forcedJSONParsing:Qs.transitional(Qs.boolean,"1.0.0"),clarifyTimeoutError:Qs.transitional(Qs.boolean,"1.0.0")},!1);var r=[],s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var n,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!s){var i=[zs,void 0];for(Array.prototype.unshift.apply(i,r),i=i.concat(o),n=Promise.resolve(e);i.length;)n=n.then(i.shift(),i.shift());return n}for(var a=e;r.length;){var c=r.shift(),u=r.shift();try{a=c(a)}catch(e){u(e);break}}try{n=zs(a)}catch(e){return Promise.reject(e)}for(;o.length;)n=n.then(o.shift(),o.shift());return n},en.prototype.getUri=function(e){return e=Hs(this.defaults,e),gr(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},mr.forEach(["delete","get","head","options"],(function(e){en.prototype[e]=function(t,r){return this.request(Hs(r||{},{method:e,url:t,data:(r||{}).data}))}})),mr.forEach(["post","put","patch"],(function(e){en.prototype[e]=function(t,r,s){return this.request(Hs(s||{},{method:e,url:t,data:r}))}}));var tn=en;function rn(e){this.message=e}rn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},rn.prototype.__CANCEL__=!0;var sn=rn;function nn(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new sn(e),t(r.reason))}))}nn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},nn.source=function(){var e;return{token:new nn((function(t){e=t})),cancel:e}};var on=nn;function an(e){var t=new tn(e),r=ar(tn.prototype.request,t);return mr.extend(r,tn.prototype,t),mr.extend(r,t),r}var cn=an(Ws);cn.Axios=tn,cn.create=function(e){return an(Hs(cn.defaults,e))},cn.Cancel=sn,cn.CancelToken=on,cn.isCancel=Vs,cn.all=function(e){return Promise.all(e)},cn.spread=function(e){return function(t){return e.apply(null,t)}},cn.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var un=cn,ln=cn;un.default=ln;var hn=un;var dn={HANDLE_TYPE:{http:1},FromCenter:function(e){this.id="",this.name="",this.type="",this.data=null;try{const t=e.toString(),r=JSON.parse(t);this.id=r.id,this.name=r.name,this.type=r.type,this.data=r.data}catch(e){}},ToCenter:function(e,t,r,s,n=!1){this.id=e,this.name=t,this.type=s,this.data=r,this.isFirst=n,this.msg=()=>{try{return JSON.stringify({id:this.id,name:this.name,type:this.type,data:this.data,isFirst:this.isFirst})}catch(e){return JSON.stringify({id:this.id,name:this.name,type:this.type,data:e,isFirst:this.isFirst})}}},FromTarget:function(){},ToTarget:function(){}};var fn={CLIENT_NAME:"demo",SERVER_CENTER:"ws://localhost:3002"};const{ToCenter:pn,FromCenter:mn,HANDLE_TYPE:_n}=dn,{CLIENT_NAME:gn,SERVER_CENTER:yn}=fn;process.env.NODE_TLS_REJECT_UNAUTHORIZED=0;const vn=1,bn=-1,wn=-2,En=3;let Cn=wn,Sn=null;function xn(){Cn=vn,Sn.send(new pn(-1,gn,null,_n.http,!0).msg())}function kn(){}function On(){Cn=wn}function Rn(e){Cn=bn}async function Tn(e){const t=new mn(e),r=await async function(e){try{const t=Object.assign({},e.data,{url:e.data.headers.target_url+e.data.url});return await hn(t)}catch(e){return e}}(t);try{if(200===r.status){const{data:e,headers:s}=r;Sn.send(new pn(t.id,gn,{data:e,headers:s,status:r.status},_n.http).msg())}else{const e=r.response;Sn.send(new pn(t.id,gn,{data:e?e.data:"unknow msg",headers:e?e.headers:{},status:e?e.status:404},_n.http).msg())}}catch(e){Sn.send(new pn(t.id,gn,e,_n.http).msg())}}function Nn(){switch(Cn){case wn:case bn:Cn=En;break;default:Cn=vn}Cn===En&&function(e){try{Sn=new ir(e),Sn.on("open",xn),Sn.on("ping",kn),Sn.on("close",On),Sn.on("message",Tn),Sn.on("error",Rn)}catch(e){Cn=wn}}(yn)}setInterval((async()=>{Nn()}),3e3);module.exports={};
